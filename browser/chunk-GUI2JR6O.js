import{e as K,o as F}from"./chunk-YC5DXTQO.js";import{a as L,b as j,c as R,d as A,e as G,f as z}from"./chunk-UWM3FORT.js";import{a as k,b as w}from"./chunk-GCUUMVV4.js";import{Aa as o,Db as M,Ea as g,Eb as d,Fb as f,Ka as b,Lb as D,P as _,Pa as c,Sb as I,U as P,Wb as E,db as s,eb as r,fb as n,gb as h,ia as S,jd as N,kd as T,oc as u,pc as v,qb as l,zb as O}from"./chunk-HBPRO42Z.js";var p=class e{http=P(w);stats=S(null);loadStats(){let a=localStorage.getItem("token"),t=a?new k({Authorization:`Bearer ${a}`}):void 0;this.http.get("http://localhost:5000/api/dashboard/stats",{headers:t}).subscribe({next:i=>this.stats.set(i.statistics),error:i=>{console.error("Erro ao carregar stats",i),this.stats.set(null)}})}static \u0275fac=function(t){return new(t||e)};static \u0275prov=_({token:e,factory:e.\u0275fac,providedIn:"root"})};function Q(e,a){if(e&1&&h(0,"canvas",8),e&2){let t=l().$implicit,i=l(2);s("data",t.chartData)("options",i.chartOptions)("type","bar")}}function W(e,a){if(e&1&&(r(0,"div",3)(1,"h3",4),d(2),n(),r(3,"div",5)(4,"div",6),c(5,Q,1,3,"canvas",7),n()()()),e&2){let t=a.$implicit;o(2),f(t.title),o(3),s("ngIf",t.chartData)}}function Y(e,a){if(e&1&&(r(0,"div"),c(1,W,6,2,"div",2),n()),e&2){let t=a.ngIf;o(),s("ngForOf",t)}}function Z(e,a){e&1&&(r(0,"p",9),d(1,"Carregando gr\xE1ficos..."),n())}var x=class e{constructor(a){this.dashboardService=a;this.dashboardService.loadStats()}groups=[];pastelColors=["rgba(255, 179, 186, 0.9)","rgba(255, 223, 186, 0.9)","rgba(255, 255, 186, 0.9)","rgba(186, 255, 201, 0.9)","rgba(186, 225, 255, 0.9)","rgba(204, 204, 255, 0.9)","rgba(255, 204, 229, 0.9)","rgba(255, 229, 204, 0.9)","rgba(229, 255, 204, 0.9)","rgba(204, 255, 229, 0.9)","rgba(204, 229, 255, 0.9)","rgba(229, 204, 255, 0.9)","rgba(255, 204, 204, 0.9)","rgba(204, 255, 255, 0.9)","rgba(255, 255, 204, 0.9)","rgba(204, 255, 204, 0.9)","rgba(255, 229, 229, 0.9)"];chartGroups=E(()=>{let a=this.dashboardService.stats();if(a&&!(!this.groups||this.groups.length===0))return this.groups.map(t=>{let i=t.keys,m=i.map(C=>a[C]??0),y=this.pastelColors.slice(0,i.length),V=y.map(C=>C.replace(", 0.7)",", 1)"));return{title:t.title,chartData:{labels:i,datasets:[{label:"Quantidade",data:m,backgroundColor:y,borderColor:V,borderWidth:1}]}}})});chartOptions={responsive:!0,plugins:{legend:{display:!1},title:{display:!1}},scales:{x:{ticks:{autoSkip:!1,maxRotation:45,minRotation:45}},y:{beginAtZero:!0}}};static \u0275fac=function(t){return new(t||e)(g(p))};static \u0275cmp=b({type:e,selectors:[["app-dashboard-chart"]],inputs:{groups:"groups"},decls:3,vars:2,consts:[["loading",""],[4,"ngIf","ngIfElse"],["class","mb-6",4,"ngFor","ngForOf"],[1,"mb-6"],[1,"text-lg","font-semibold","mb-2"],[1,"card","p-4","bg-white/80","rounded","shadow-sm"],[1,"chart-container"],["baseChart","","height","150",3,"data","options","type",4,"ngIf"],["baseChart","","height","150",3,"data","options","type"],[1,"text-gray-500"]],template:function(t,i){if(t&1&&c(0,Y,2,1,"div",1)(1,Z,2,0,"ng-template",null,0,I),t&2){let m=O(2);s("ngIf",i.chartGroups())("ngIfElse",m)}},dependencies:[v,u,K],styles:["[_nghost-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:20px}.chart-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column}.card[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;justify-content:center}.chart-container[_ngcontent-%COMP%]{position:relative;width:100%;max-width:800px;height:280px;margin:0 auto;display:flex;justify-content:center;align-items:center}.chart-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{max-width:100%;max-height:100%}@media (min-width: 1024px){.chart-container[_ngcontent-%COMP%]{height:350px}}@media (max-width: 768px){.chart-container[_ngcontent-%COMP%]{height:240px}}@media (max-width: 480px){.chart-container[_ngcontent-%COMP%]{height:200px}}"]})};function J(e,a){if(e&1&&(r(0,"p-card",9)(1,"div",10),h(2,"i"),n(),r(3,"h3",11),d(4),n(),r(5,"p",12),d(6),n()()),e&2){let t=a.$implicit,i=l().ngIf,m=l();o(2),M(D("pi ",m.iconMap[t]," text-3xl")),o(2),f(t),o(2),f(i[t])}}function U(e,a){if(e&1&&(r(0,"div",7),c(1,J,7,5,"p-card",8),n()),e&2){let t=l();o(),s("ngForOf",t.statKeys)}}function X(e,a){e&1&&(r(0,"p",13),d(1,"Carregando estat\xEDsticas..."),n())}var B=class e{constructor(a,t){this.authService=a;this.dashboardService=t}statKeys=["Novas Solicita\xE7\xF5es","Solicita\xE7\xF5es Recebidas","Solicita\xE7\xF5es Distribuidas","Recebidas por Perito","Per\xEDcias Em Andamento","Per\xEDcias Conclu\xEDdas","Laudos Pendentes","N\xE3o Pertencem ao SIP","Pendentes de envio ao SIP","Enviados ao SIP","Em cust\xF3dia do N\xFAcleo","Cobran\xE7a","Solicita\xE7\xF5es Devolvidas","Solicita\xE7\xF5es Pausadas","Laudos Para Revis\xE3o","Laudos para Corre\xE7\xE3o","SVO - Laudos Pendentes"];groups=[{title:"Solicita\xE7\xF5es",keys:[this.statKeys[0],this.statKeys[1],this.statKeys[2],this.statKeys[12],this.statKeys[13]]},{title:"Per\xEDcias",keys:[this.statKeys[4],this.statKeys[5],this.statKeys[3]]},{title:"Laudos",keys:[this.statKeys[6],this.statKeys[14],this.statKeys[15],this.statKeys[16]]},{title:"Outros",keys:[this.statKeys[7],this.statKeys[8],this.statKeys[9],this.statKeys[10],this.statKeys[11]]}];iconMap={"Novas Solicita\xE7\xF5es":"pi-inbox","Solicita\xE7\xF5es Recebidas":"pi-envelope","Solicita\xE7\xF5es Distribuidas":"pi-send","Recebidas por Perito":"pi-user","Per\xEDcias Em Andamento":"pi-spin pi-spinner","Per\xEDcias Conclu\xEDdas":"pi-check-circle","Laudos Pendentes":"pi-file","N\xE3o Pertencem ao SIP":"pi-ban","Pendentes de envio ao SIP":"pi-clock","Enviados ao SIP":"pi-check","Em cust\xF3dia do N\xFAcleo":"pi-lock",Cobran\u00E7a:"pi-money-bill","Solicita\xE7\xF5es Devolvidas":"pi-replay","Solicita\xE7\xF5es Pausadas":"pi-pause","Laudos Para Revis\xE3o":"pi-search","Laudos para Corre\xE7\xE3o":"pi-pencil","SVO - Laudos Pendentes":"pi-question"};ngOnInit(){this.dashboardService.loadStats()}doLogout(){this.authService.logout()}static \u0275fac=function(t){return new(t||e)(g(F),g(p))};static \u0275cmp=b({type:e,selectors:[["app-dashboard"]],decls:16,vars:3,consts:[["value","0"],["value","1"],[1,"p-4"],[1,"text-2xl","font-bold","mb-6"],["class","grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",4,"ngIf"],["class","text-gray-500 mt-4",4,"ngIf"],[3,"groups"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","lg:grid-cols-4","gap-6"],["class","card shadow-md text-center p-6 rounded transform hover:scale-105 transition-transform duration-300",4,"ngFor","ngForOf"],[1,"card","shadow-md","text-center","p-6","rounded","transform","hover:scale-105","transition-transform","duration-300"],[1,"flex","justify-center","mb-4"],[1,"font-bold","text-lg","mb-2"],[1,"text-2xl","font-semibold"],[1,"text-gray-500","mt-4"]],template:function(t,i){t&1&&(r(0,"p-tabs",0)(1,"p-tablist")(2,"p-tab",0),d(3,"Geral"),n(),r(4,"p-tab",1),d(5,"Gr\xE1ficos"),n()(),r(6,"p-tabpanels")(7,"p-tabpanel",0)(8,"div",2)(9,"h2",3),d(10,"Estat\xEDsticas Gerais"),n(),c(11,U,2,1,"div",4)(12,X,2,0,"p",5),n()(),r(13,"p-tabpanel",1)(14,"div",2),h(15,"app-dashboard-chart",6),n()()()()),t&2&&(o(11),s("ngIf",i.dashboardService.stats()),o(),s("ngIf",!i.dashboardService.stats()),o(3),s("groups",i.groups))},dependencies:[v,u,z,G,A,R,L,j,T,N,x],styles:['.dashboard-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;font-family:Arial,sans-serif}.topbar[_ngcontent-%COMP%]{background:#000312;color:#fff;padding:1rem;display:flex;justify-content:space-between;align-items:center}.main-content[_ngcontent-%COMP%]{display:flex;flex:1}.sidebar[_ngcontent-%COMP%]{width:200px;background:#000312;padding:1rem;border-right:1px solid #ddd}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;margin:1rem 0;cursor:pointer;color:#fff;padding:.5rem 1rem;transition:background .3s,color .3s;z-index:0}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#1e40af;color:#000312}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:after{content:"";position:absolute;right:0;top:0;height:100%;width:0;background:#3b82f6;transition:width .3s;z-index:-1}.sidebar[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover:after{width:100%;left:0;right:auto}.content[_ngcontent-%COMP%]{flex:1;padding:1rem;background:#f8fafc}.cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:1rem}.card[_ngcontent-%COMP%]{position:relative;background-color:#3b82f6;color:#fff;border-radius:8px;padding:1rem;text-align:center;box-shadow:0 2px 5px #0000001a;overflow:hidden;transition:transform .2s}.card[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.card[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;right:0;width:0;height:100%;background-color:#3bf6924d;transition:width .3s ease;z-index:0}.card[_ngcontent-%COMP%]:hover:after{width:100%;left:0;right:auto}.card[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{position:relative;z-index:1}.card[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:.5rem}']})};export{B as Dashboard};
